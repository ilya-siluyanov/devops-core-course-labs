# Lab 12

## Mount config

```bash
> kubectl get po
NAME                                    READY   STATUS    RESTARTS       AGE
app-python-58654b7c58-dz6qv             1/1     Running   0              7s
app-python-58654b7c58-ffhgs             1/1     Running   0              10s
app-python-58654b7c58-fs5nb             1/1     Running   0              14s
app-rust-7bb47887b4-k62g6               1/1     Running   0              15m
vault-0                                 1/1     Running   2 (112m ago)   11d
vault-agent-injector-576cc6ffc4-m2896   1/1     Running   2 (112m ago)   11d
> kubectl exec app-python-58654b7c58-fs5nb -- cat /app-python/config.json
{
    "labno": 12
}
```

## Persistence

```bash
> kubectl get po                                
NAME                                    READY   STATUS    RESTARTS       AGE
app-python-ddf4c84f4-bhbjb              1/1     Running   0              39s
app-python-ddf4c84f4-hx4bg              1/1     Running   0              35s
app-python-ddf4c84f4-mbmt5              1/1     Running   0              32s
> kubectl describe po app-python-ddf4c84f4-bhbjb                          
Name:             app-python-ddf4c84f4-bhbjb
Namespace:        default
Priority:         0
Service Account:  lab11-reader
Node:             minikube/192.168.49.2
Start Time:       Fri, 08 Dec 2023 12:59:52 +0000
Labels:           app=app-python
                  app.kubernetes.io/instance=app-python
                  app.kubernetes.io/managed-by=Helm
                  app.kubernetes.io/version=1.16.0
                  pod-template-hash=ddf4c84f4
Annotations:      <none>
Status:           Running
IP:               10.244.0.140
IPs:
  IP:           10.244.0.140
Controlled By:  ReplicaSet/app-python-ddf4c84f4
Containers:
  app-python:
    Container ID:   docker://9b230a08b1bb98258627421e083271d6d45e27ff1edbb562b93680181b193040
    Image:          ilyasiluyanov/app_python:dev
    Image ID:       docker-pullable://ilyasiluyanov/app_python@sha256:4e8337763418ac87cfa03a840594ca9774e4b1e2d7c9a7134dff96664e98d9bc
    Port:           8000/TCP
    Host Port:      0/TCP
    State:          Running
      Started:      Fri, 08 Dec 2023 12:59:55 +0000
    Ready:          True
    Restart Count:  0
    Environment:    <none>
    Mounts:
      /app-python/config.json from lab12-config (rw,path="config.json")
      /tmp/visits from visits-storage (rw,path="visits")
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-zsnrt (ro)
> kubectl port-forward svc/app-python 8000:80
Forwarding from 127.0.0.1:8000 -> 8000
Forwarding from [::1]:8000 -> 8000
> 
```

Prepopulate volume with a file:

```bash
> 
```
